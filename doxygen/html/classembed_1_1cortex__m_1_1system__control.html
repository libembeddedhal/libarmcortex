<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libarmcortex API: embed::cortex_m::system_control Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libarmcortex API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>embed</b></li><li class="navelem"><b>cortex_m</b></li><li class="navelem"><a class="el" href="classembed_1_1cortex__m_1_1system__control.html">system_control</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="classembed_1_1cortex__m_1_1system__control-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">embed::cortex_m::system_control Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Driver for controlling and inspect various aspects of the Cortex Mx Systems such as interrupt vector table location, fault address locations and fpu (coprocessor) control.  
 <a href="classembed_1_1cortex__m_1_1system__control.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="system__control_8hpp_source.html">system_control.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structembed_1_1cortex__m_1_1system__control_1_1scb__registers__t.html">scb_registers_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure type to access the System Control Block (SCB).  <a href="structembed_1_1cortex__m_1_1system__control_1_1scb__registers__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa3a8ac3d0826d7aabfb8114912579ec3"><td class="memItemLeft" align="right" valign="top"><a id="aa3a8ac3d0826d7aabfb8114912579ec3" name="aa3a8ac3d0826d7aabfb8114912579ec3"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>initialize_floating_point_unit</b> ()</td></tr>
<tr class="memdesc:aa3a8ac3d0826d7aabfb8114912579ec3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable the floating point unit coprocessor within Cortex M4 and above processor. <br /></td></tr>
<tr class="separator:aa3a8ac3d0826d7aabfb8114912579ec3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a398a6b79a1b5d8e53d48ad9dd6f86fe8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classembed_1_1cortex__m_1_1system__control.html#a398a6b79a1b5d8e53d48ad9dd6f86fe8">set_interrupt_vector_table_address</a> (void *p_table_location)</td></tr>
<tr class="memdesc:a398a6b79a1b5d8e53d48ad9dd6f86fe8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the address of the systems interrupt vector table.  <a href="classembed_1_1cortex__m_1_1system__control.html#a398a6b79a1b5d8e53d48ad9dd6f86fe8">More...</a><br /></td></tr>
<tr class="separator:a398a6b79a1b5d8e53d48ad9dd6f86fe8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7e8c25387eb7bdb30438dcf3729346e"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classembed_1_1cortex__m_1_1system__control.html#aa7e8c25387eb7bdb30438dcf3729346e">get_interrupt_vector_table_address</a> ()</td></tr>
<tr class="memdesc:aa7e8c25387eb7bdb30438dcf3729346e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the address of the systems interrupt vector table.  <a href="classembed_1_1cortex__m_1_1system__control.html#aa7e8c25387eb7bdb30438dcf3729346e">More...</a><br /></td></tr>
<tr class="separator:aa7e8c25387eb7bdb30438dcf3729346e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:afdee24068c81f3c4b47849ae7f8db67b"><td class="memItemLeft" align="right" valign="top">static auto *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classembed_1_1cortex__m_1_1system__control.html#afdee24068c81f3c4b47849ae7f8db67b">scb</a> ()</td></tr>
<tr class="separator:afdee24068c81f3c4b47849ae7f8db67b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-attribs" name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:a10225a8f0d3ee88bd40c094e40e0f52c"><td class="memItemLeft" align="right" valign="top"><a id="a10225a8f0d3ee88bd40c094e40e0f52c" name="a10225a8f0d3ee88bd40c094e40e0f52c"></a>
static constexpr intptr_t&#160;</td><td class="memItemRight" valign="bottom"><b>scb_address</b> = 0xE000'ED00UL</td></tr>
<tr class="memdesc:a10225a8f0d3ee88bd40c094e40e0f52c"><td class="mdescLeft">&#160;</td><td class="mdescRight">System control block address. <br /></td></tr>
<tr class="separator:a10225a8f0d3ee88bd40c094e40e0f52c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Driver for controlling and inspect various aspects of the Cortex Mx Systems such as interrupt vector table location, fault address locations and fpu (coprocessor) control. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="aa7e8c25387eb7bdb30438dcf3729346e" name="aa7e8c25387eb7bdb30438dcf3729346e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7e8c25387eb7bdb30438dcf3729346e">&#9670;&nbsp;</a></span>get_interrupt_vector_table_address()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void * embed::cortex_m::system_control::get_interrupt_vector_table_address </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the address of the systems interrupt vector table. </p>
<p >On reset the VTOR register is set to 0x0000'0000 or nullptr.</p>
<dl class="section return"><dt>Returns</dt><dd>void* - address within VTOR the interrupt vector table relocation register. </dd></dl>

</div>
</div>
<a id="afdee24068c81f3c4b47849ae7f8db67b" name="afdee24068c81f3c4b47849ae7f8db67b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdee24068c81f3c4b47849ae7f8db67b">&#9670;&nbsp;</a></span>scb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static auto * embed::cortex_m::system_control::scb </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>auto* - Address of the Cortex M system control block register </dd></dl>

</div>
</div>
<a id="a398a6b79a1b5d8e53d48ad9dd6f86fe8" name="a398a6b79a1b5d8e53d48ad9dd6f86fe8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a398a6b79a1b5d8e53d48ad9dd6f86fe8">&#9670;&nbsp;</a></span>set_interrupt_vector_table_address()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void embed::cortex_m::system_control::set_interrupt_vector_table_address </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p_table_location</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the address of the systems interrupt vector table. </p>
<p >The interrupt vector table (IVT) is held in ROM which means that, either the interrupt service routines (ISR) had to be defined at compile time making them immutable at runtime, or that each ISR calls a mutable function pointer which can be changed at runtime.</p>
<p >The problem with the first option is that it makes writing and using libraries difficult. Usually requiring updates to the IVT manually by the application designer based on what libraries and drivers the application is using.</p>
<p >The second solution has a problem where the additional another layer of indirection increases interrupt latency. A more critical problem of this approach is that many ISRs take advantage of the state of the system when the ISR runs. For example, context switching in an RTOS needs to be able to see the address of where code was when the interrupt occurred and having an additional point of indirection (i.e. calling a function pointer) will change that location from the task to the ISR that called the context switch function. This will usually result in a fault of some sort.</p>
<p >Creating an interrupt vector table in RAM and relocating the ISRs there consumes RAM space, but gives great flexibility over the table at runtime.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_table_location</td><td>- address of the interrupt vector table. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/github/workspace/include/libarmcortex/<a class="el" href="system__control_8hpp_source.html">system_control.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
